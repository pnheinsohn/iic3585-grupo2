{"remainingRequest":"/home/seba/Desktop/tareas-avanzado/tarea5/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/seba/Desktop/tareas-avanzado/tarea5/src/components/CollectionItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/seba/Desktop/tareas-avanzado/tarea5/src/components/CollectionItem.vue","mtime":1591591313933},{"path":"/home/seba/Desktop/tareas-avanzado/tarea5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/seba/Desktop/tareas-avanzado/tarea5/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/seba/Desktop/tareas-avanzado/tarea5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/seba/Desktop/tareas-avanzado/tarea5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBBbGJ1bUl0ZW0gZnJvbSAnLi9BbGJ1bUl0ZW0udnVlJzsKaW1wb3J0IHsgQ2Fyb3VzZWwsIFNsaWRlIH0gZnJvbSAndnVlLWNhcm91c2VsJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwoKLyogY29uc3QgbG9jYWxBbGJ1bXNVUkwgPSAiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FsYnVtcyI7ICovCmNvbnN0IHBsYXlsaXN0c1VSTCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDAvcGxheWxpc3RzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdDb2xsZWN0aW9uSXRlbScsCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgQWxidW1JdGVtLAogICAgICAgIENhcm91c2VsLAogICAgICAgIFNsaWRlLAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgIGFsYnVtczogW10sCiAgICAgICAgICAgIGFsYnVtSWRzOiBbXSwKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IG1hcEdldHRlcnMoWwogICAgInNob3duQWxidW1zIiwKICAgICJhbGxBbGJ1bXMiCiAgICBdKSwKICAgIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLyogY29uc3QgcGxheWxpc3RSZXMgPSBhd2FpdCBheGlvcy5nZXQocGxheWxpc3RzVVJMLCB7CiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgYWxidW1JZHMgPSBwbGF5bGlzdFJlcy5kYXRhWzBdLmFsYnVtSWRzOwogICAgICAgICAgICB0aGlzLmFsYnVtSWRzID0gYWxidW1JZHM7CiAgICAgICAgICAgIGNvbnN0IGFsYnVtUHJvbWlzZXMgPSBhbGJ1bUlkcy5tYXAoYXN5bmMgKGlkKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgYXhpb3MuZ2V0KGxvY2FsQWxidW1zVVJMLCB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3Qgc29sdmVkUHJvbWlzZXMgPSBhd2FpdCBQcm9taXNlLmFsbChhbGJ1bVByb21pc2VzKTsKICAgICAgICAgICAgc29sdmVkUHJvbWlzZXMuZm9yRWFjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmFsYnVtcyA9IFsuLi50aGlzLmFsYnVtcywgcmVzLmRhdGFbMF1dOwogICAgICAgICAgICB9KTsgKi8KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5hbGxBbGJ1bXMpOwogICAgICAgICAgICBpZiAoIXRoaXMuYWxsQWxidW1zLmxlbmd0aCkgewogICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoQWxidW1zKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWxsQWxidW1zKTsKICAgICAgICAgICAgdGhpcy5jaGFuZ2VTaG93bkFsYnVtcyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgICAgIH0KICAgICAgICB9IGNhdGNoKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwQWN0aW9ucyhbCiAgICAgICAgImZldGNoQWxidW1zIiwKICAgICAgICAiY2hhbmdlU2hvd25BbGJ1bXMiCiAgICAgICAgXSksCiAgICAgICAgYXN5bmMgcmVtb3ZlQWxidW0oYWxidW1JZCkgewogICAgICAgICAgICB0aGlzLmFsYnVtcyA9IHRoaXMuYWxidW1zLmZpbHRlcigoYWxidW0pID0+IGFsYnVtLmlkICE9PSBhbGJ1bUlkKTsKICAgICAgICAgICAgdGhpcy5hbGJ1bUlkcyA9IHRoaXMuYWxidW1JZHMuZmlsdGVyKChpZCkgPT4gaWQgIT09IGFsYnVtSWQpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgICAgIGF3YWl0IGF4aW9zLnBhdGNoKHBsYXlsaXN0c1VSTCArICcvJyArIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwgewogICAgICAgICAgICAgICAgYWxidW1JZHM6IHRoaXMuYWxidW1JZHMsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9Cn0K"},{"version":3,"sources":["CollectionItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CollectionItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <carousel\n        ref=\"my-carousel\"\n        :loop=\"true\"\n        :autoplay=\"true\"\n        :autoplayTimeout=\"10000\"\n        :autoplayHoverPause=\"true\"\n        :perPage=\"6\"\n        :navigationEnabled=\"true\"\n        :speed=\"1500\"\n        :centerMode=\"true\">\n        <slide v-bind:key=\"album.id\" v-for=\"album in shownAlbums.slice().reverse()\">\n            <AlbumItem v-bind:album=\"album\" v-on:remove-album=\"removeAlbum\"/>\n        </slide>\n    </carousel>\n</template>\n\n<script>\nimport axios from 'axios';\nimport AlbumItem from './AlbumItem.vue';\nimport { Carousel, Slide } from 'vue-carousel';\nimport { mapGetters, mapActions } from 'vuex';\n\n/* const localAlbumsURL = \"http://localhost:3000/albums\"; */\nconst playlistsURL = \"http://localhost:3000/playlists\";\n\nexport default {\n    name: 'CollectionItem',\n    components: {\n        AlbumItem,\n        Carousel,\n        Slide,\n    },\n    data() {\n        return {\n            name: '',\n            albums: [],\n            albumIds: [],\n        }\n    },\n    computed: mapGetters([\n    \"shownAlbums\",\n    \"allAlbums\"\n    ]),\n    async created() {\n        try {\n            /* const playlistRes = await axios.get(playlistsURL, {\n                params: {\n                    id: this.$route.params.id,\n                }\n            });\n            const albumIds = playlistRes.data[0].albumIds;\n            this.albumIds = albumIds;\n            const albumPromises = albumIds.map(async (id) => {\n                return await axios.get(localAlbumsURL, {\n                    params: {\n                        id,\n                    }\n                });\n            });\n            const solvedPromises = await Promise.all(albumPromises);\n            solvedPromises.forEach((res) => {\n                this.albums = [...this.albums, res.data[0]];\n            }); */\n            console.log(this.allAlbums);\n            if (!this.allAlbums.length) {\n            await this.fetchAlbums();\n            console.log(this.allAlbums);\n            this.changeShownAlbums(this.$route.params.id);\n        }\n        } catch(error) {\n            console.error(error);\n        }\n    },\n    methods: {\n        ...mapActions([\n        \"fetchAlbums\",\n        \"changeShownAlbums\"\n        ]),\n        async removeAlbum(albumId) {\n            this.albums = this.albums.filter((album) => album.id !== albumId);\n            this.albumIds = this.albumIds.filter((id) => id !== albumId);\n            console.log(this.$route.params.id)\n            await axios.patch(playlistsURL + '/' + this.$route.params.id, {\n                albumIds: this.albumIds,\n            });\n        },\n    }\n}\n</script>\n\n<style>\n</style>"]}]}